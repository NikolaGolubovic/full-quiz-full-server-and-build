(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),o=a(10),u=(a(67),a(2)),l=a(9),i=a(13);function m(e){var t=e.user;return r.a.createElement("header",{className:"nav"},r.a.createElement(l.b,{exact:!0,to:"/",activeClassName:"nav-active"},"Homepage"),r.a.createElement(l.b,{to:"/quiz",activeClassName:"nav-active"},"Play Quiz"),t?r.a.createElement("div",{className:"user-control"},r.a.createElement("div",{className:"log-out",onClick:function(){window.localStorage.clear(),window.location.reload()}},"Log Out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/register",activeClassName:"nav-active"},"Sign Up"),r.a.createElement(l.b,{to:"/login",activeClassName:"nav-active"},"Sign In")))}var f=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e}));return r.a.createElement("div",null,t.info&&t.info.map((function(t){return setTimeout((function(){return e({type:"REMOVE_NOTI",id:t.id})}),4e3),r.a.createElement("div",{className:"info-notification",key:t.id},r.a.createElement("p",null,t.content),r.a.createElement("button",{onClick:function(){return e({type:"REMOVE_NOTI",id:t.id})}},"Close"))})),t.errors&&t.errors.map((function(t){return setTimeout((function(){return e({type:"REMOVE_ERROR",id:t.id})}),4e3),r.a.createElement("div",{className:"error-notification",key:t.id},r.a.createElement("p",null,t.content),r.a.createElement("button",{onClick:function(){return e({type:"REMOVE_ERROR",id:t.id})}},"Close"))})))};var p=function(){return r.a.createElement("div",{className:"guest-homepage-container"},r.a.createElement("h2",null,"Hello Guest"),r.a.createElement("p",null,"Wellcome to Trivia Quiz"),r.a.createElement("div",{className:"quiz-imgs"},r.a.createElement("img",{src:"/css/geo1.png",alt:""}),r.a.createElement("img",{src:"/css/geo2.png",alt:""}),r.a.createElement("img",{src:"/css/history1.jpg",alt:""}),r.a.createElement("img",{src:"/css/history2.jpg",alt:""}),r.a.createElement("img",{src:"/css/movie1.png",alt:""}),r.a.createElement("img",{src:"/css/movie2.jpg",alt:""}),r.a.createElement("img",{src:"/css/science1.png",alt:""}),r.a.createElement("img",{src:"/css/science2.jpg",alt:""}),r.a.createElement("img",{src:"/css/sport1.png",alt:""}),r.a.createElement("img",{src:"/css/sport2.png",alt:""})),r.a.createElement("div",{className:"guest-directions"},r.a.createElement("p",null,"If you want better experience, to compare your self with other, you need to ",r.a.createElement("a",{href:"/register"},"Sign up")),r.a.createElement("p",null,"Or you can just play"),r.a.createElement("a",{className:"guest-play-quiz",href:"/quiz"},"Play Quiz")))},E=a(3),b=a.n(E),v=a(5),d=a(19),h=a.n(d),g=null,O=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/users",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:g}},e.next=3,h.a.get("".concat("/api/users","/scorecard"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y={setToken:function(e){g="bearer ".concat(e)},register:O,login:j,sendScore:function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={score:t},n={headers:{Authorization:g}},e.next=4,h.a.put("".concat("/api/users","/score"),a,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getScoreCard:w};var x=function(e){var t=e.user,a=Object(n.useState)({}),c=Object(u.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){y.getScoreCard().then((function(e){return o(e)})).catch((function(e){return console.log("err",e.response.data)}))}),[]),r.a.createElement("div",{className:"user-score"},r.a.createElement("h1",null,"Hello ",t),r.a.createElement("p",null,"Your last game score is ",s.totalPoints<=0?0:s.lastScore),r.a.createElement("p",null,"Your best score is ",s.maxPoints),r.a.createElement("p",null,"Your average score per game is"," ",0===s.totalPoints?0:(s.totalPoints/s.totalGames).toFixed(0)))};var N=function(e){var t=e.user;return r.a.createElement("div",null,t?r.a.createElement(x,{user:t}):r.a.createElement(p,null))},k=a(25),S=a(32),C=a.n(S),R=function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"}))},z=a(12),q={info:[],errors:[]},T=function(e){return{type:"ADD_INFO",info:e}},_=function(e){return{type:"ADD_ERROR",error:e}},I=function(){return Math.floor(1e5*Math.random())},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INFO":return Object(z.a)(Object(z.a)({},e),{},{info:e.info.concat({content:t.info,id:"info-".concat(I())})});case"ADD_ERROR":return console.log(t),Object(z.a)(Object(z.a)({},e),{},{errors:e.errors.concat({content:t.error,id:"error-".concat(I())})});case"REMOVE_NOTI":return Object(z.a)(Object(z.a)({},e),{},{info:e.info.filter((function(e){return e.id!==t.id}))});case"REMOVE_ERROR":return Object(z.a)(Object(z.a)({},e),{},{errors:e.errors.filter((function(e){return e.id!==t.id}))});case"RESET_NOTIFICATIONS":return q;default:return e}};var P=function(e){var t=e.score,a=e.user,n=Object(o.b)(),c=Object(i.f)(),s=function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,y.sendScore(t);case 3:n(T("Your score is successfully updated")),c.push("/");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"score-container"},r.a.createElement("h2",null,"You made: ",t," "),a&&r.a.createElement("button",{className:"confirm-score",onClick:s},"Confirm Your result"),!a&&r.a.createElement("button",{className:"confirm-score",onClick:function(){return window.location.reload()}},"Play Again"))};var A=function(e){var t,a=e.nums,c=e.quizCreated,s=e.user,o=Object(n.useState)([]),l=Object(u.a)(o,2),i=l[0],m=l[1],f=Object(n.useState)(!0),p=Object(u.a)(f,2),E=p[0],d=p[1],h=Object(n.useState)(0),g=Object(u.a)(h,2),O=g[0],j=g[1],w=Object(n.useState)(0),y=Object(u.a)(w,2),x=y[0],N=y[1],S=Object(n.useState)(12),z=Object(u.a)(S,2),q=z[0],T=z[1],_=Object(n.useState)(!1),I=Object(u.a)(_,2),M=I[0],A=I[1],D=Object(n.useState)(!1),Q=Object(u.a)(D,2),F=Q[0],U=Q[1],V=Object(n.useState)(0),Y=Object(u.a)(V,2),H=Y[0],J=Y[1];Object(n.useEffect)((function(){var e=[],t=[];function n(e){return r.apply(this,arguments)}function r(){return(r=Object(v.a)(b.a.mark((function e(n){var r,c,s,o,u,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<1)){e.next=10;break}return e.next=3,fetch("https://opentdb.com/api.php?amount=10&type=multiple");case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,t.push(c.results),e.next=33;break;case 10:if(1!==n.length){e.next=20;break}return e.next=13,fetch("https://opentdb.com/api.php?amount=10&category=".concat(a[0],"&type=multiple"));case 13:return s=e.sent,e.next=16,s.json();case 16:o=e.sent,t.push(o.results),e.next=33;break;case 20:if(!(n.length>1)){e.next=33;break}u=0;case 22:if(!(u<n.length)){e.next=33;break}return e.next=25,fetch(n[u]);case 25:return l=e.sent,e.next=28,l.json();case 28:i=e.sent,t.push(i.results);case 30:u++,e.next=22;break;case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e=a.map((function(e){return"https://opentdb.com/api.php?amount=10&category=".concat(e,"&type=multiple")}));var s=[];function o(){return(o=Object(v.a)(b.a.mark((function a(){var r,c,o,u,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=function(e){for(var t=[],a=0;a<e.length;a++){for(var n=[];n.length<4;)n.push(Math.floor(4*Math.random())),n=Object(k.a)(new Set(n));t[a]=[];for(var r=0;r<4;r++)t[a][n[r]]=e[a][r]}return t},c=function(e){for(;r.length<10;)r.push(Math.floor(Math.random()*e)),r=Object(k.a)(new Set(r))},a.next=4,n(e);case 4:if(10!==t.length){a.next=7;break}return m(t),a.abrupt("return");case 7:for(r=[],t=t.reduce((function(e,t){return e.concat(t)})),c(t.length),o=0;o<r.length;o++)s.push(t[r[o]]);return u=[],s.forEach((function(e,t){u[t]=[],e.correct_answer&&(u[t].push({solution:e.correct_answer,answer:!0}),delete e.correct_answer),e.incorrect_answers&&(e.incorrect_answers.map((function(e,a){return u[t].push({solution:e,answer:!1})})),delete e.incorrect_answers)})),u=l(u),s.forEach((function(e,t){return s[t].solutions=u[t]})),a.next=17,m(s);case 17:d(!1);case 18:case"end":return a.stop()}}),a)})))).apply(this,arguments)}c&&function(){o.apply(this,arguments)}()}),[c,a]);var G=function(){if(0===q)return T(12),9===O?void A(!0):(j(O+1),void U(!1));t=setTimeout((function(){T(q-1)}),1e3)};function L(){O+1!==10?(clearTimeout(t),j(O+1),U(!1),T(12)):A(!0)}return E?r.a.createElement(R,null):r.a.createElement("div",{className:"quiz-main-container"},r.a.createElement("div",{className:M?"blank":""},i.map((function(e,a){if(O===a)return r.a.createElement("ul",{className:"quiz-container",key:e.question.slice(10)},r.a.createElement("li",{className:"score-info",key:a,onClick:G()},r.a.createElement("small",null,"Time:")," ",q," ",r.a.createElement("small",null,"Points:")," ",x," ",r.a.createElement("small",null,"Question Number:")," ",a+1),r.a.createElement("button",{className:F?"fifty-used":"fifty-fifty",onClick:function(){return function(e){for(var a=[],n=[],r=0;a.length<2;)a.push(Math.floor(3*Math.random())),a=Object(k.a)(new Set(a));e.forEach((function(e){e.answer||(e.half=!0,n.push(e))}));for(var c=0;c<=2;c++)if(c!==a[0]&&c!==a[1]){r=c;break}n[r].half=!1,clearTimeout(t),U(!0),J(H+1)}(e.solutions)},disabled:F||H>=3},"50:50"),r.a.createElement("li",{className:"question-title",key:e.category+a},C()(e.question)),e.solutions.map((function(a){return r.a.createElement("button",{className:"solution",key:a.solution,onClick:function(){return function(e,a){var n=1,r=1;e.answer?("hard"===a?n=5:"medium"===a&&(n=3),q>8?r=5:q>=4&&q<=8&&(r=3),N(x+n+r)):N(n=x+-3>=0?x-3:0),clearTimeout(t),O+1!==10?(j(O+1),U(!1),T(12)):A(!0)}(a,e.difficulty)},disabled:a.half},r.a.createElement("span",{className:a.half?"half":""},C()(a.solution)))})),r.a.createElement("button",{className:"next-q",onClick:L},"Next Question"))}))),r.a.createElement("div",{className:M?"score":"blank"},r.a.createElement(P,{score:x,user:s})))};var D=function(e){var t=e.user,a=Object(i.f)(),c={},s=[],o=[{"General Knowledge":9},{History:23},{Geography:22},{Film:11},{"Science & Nature":17}],l={};o.forEach((function(e){for(var t in e)l[t]=e[t]})),o.forEach((function(e,t){for(var a in e)c[a]=!1}));var m=Object(n.useState)([]),f=Object(u.a)(m,2),p=f[0],E=f[1],b=Object(n.useState)(c),v=Object(u.a)(b,2),d=v[0],h=v[1],g=Object(n.useState)(!1),O=Object(u.a)(g,2),j=O[0],w=O[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:j?"blank":"selection"},r.a.createElement("h3",null,"Choose your Categories"),r.a.createElement("ul",{className:"categories"},o.map((function(e){var t=function(t){return{v:r.a.createElement("li",{key:e[t],className:d&&d[t]?"category active":"category",onClick:function(){return function(e){(c=d)[e]?(c[e]=!1,h(c)):(c[e]=!0,h(c)),s=p;for(var t=0;t<s.length;t++)if(s[t]===l[e])return s.splice(t,1),E(s),void a.push("/quiz");s.push(l[e]),E(s),a.push("/quiz")}(t)}},t)}};for(var n in e){var o=t(n);if("object"===typeof o)return o.v}}))),r.a.createElement("button",{className:"btn-create-quiz",onClick:function(){w(!0)}},function(e){var t=0,a="";for(var n in e)e[n]&&(t+=1),1===t&&e[n]&&(a=n);return 1===t?"Create ".concat(a,"'s Quiz"):t>1?"Create Quiz with choosen areas":"Create highly random Quiz"}(d))),r.a.createElement("div",{className:j?"quiz":"blank"},r.a.createElement(A,{nums:p,quizCreated:j,user:t})))};var Q=function(e){var t=e.user,a=Object(o.b)(),c=Object(i.f)();Object(n.useEffect)((function(){t&&c.push("/")}),[t,c]);var s=Object(n.useState)(""),l=Object(u.a)(s,2),m=l[0],f=l[1],p=Object(n.useState)(""),E=Object(u.a)(p,2),d=E[0],h=E[1],g=Object(n.useState)(!1),O=Object(u.a)(g,2),j=O[0],w=O[1];function x(){return(x=Object(v.a)(b.a.mark((function e(t){var n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=[],e.prev=2,m||n.push("Username is missing"),d||n.push("Password is missing"),0===n.length){e.next=7;break}throw n;case 7:return e.next=9,y.login({username:m,password:d});case 9:r=e.sent,c=JSON.stringify(r),window.localStorage.setItem("loggedUser",c),a(T("Hello ".concat(m))),setTimeout((function(){return window.location.reload()}),1500),w(!0),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Array.isArray(e.t0)?e.t0.forEach((function(e){a(_(e))})):e.t0.response&&e.t0.response.data?a(_(e.t0.response.data.error)):a(_(e.t0.message));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"credentials-container"},!j&&r.a.createElement("form",{onSubmit:function(e){return x.apply(this,arguments)}},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",value:m,onChange:function(e){return f(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",value:d,onChange:function(e){return h(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("button",null,"Login")))};var F=function(e){var t=e.user,a=Object(n.useState)(""),c=Object(u.a)(a,2),s=c[0],l=c[1],m=Object(n.useState)(""),f=Object(u.a)(m,2),p=f[0],E=f[1],d=Object(n.useState)(""),h=Object(u.a)(d,2),g=h[0],O=h[1],j=Object(o.b)(),w=Object(i.f)();Object(n.useEffect)((function(){t&&w.push("/")}));var x=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,a=[],p!==g&&a.push("Password Confirmation does not match!"),0===a.length){e.next=6;break}throw a;case 6:return e.next=8,y.register({username:s,password:p});case 8:return e.next=10,y.login({username:s,password:p});case 10:n=e.sent,r=JSON.stringify(n),window.localStorage.setItem("loggedUser",r),window.location.reload(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Array.isArray(e.t0)?e.t0.forEach((function(e){return j(_(e))})):e.t0&&e.t0.response&&j(_(e.t0.response.data.error));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"credentials-container"},r.a.createElement("form",{onSubmit:x},r.a.createElement("small",null,"Username"),r.a.createElement("input",{type:"text",value:s,onChange:function(e){return l(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("small",null,"Password"),r.a.createElement("input",{type:"password",value:p,onChange:function(e){return E(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("small",null,"Confirm Password"),r.a.createElement("input",{type:"password",value:g,onChange:function(e){return O(e.target.value)}})," ",r.a.createElement("br",null),r.a.createElement("button",null,"Register")))};var U=function(){return r.a.createElement("footer",null,"\xa9",r.a.createElement("small",null,"Pale blue Dot"))};var V=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e),a=t.token;c(t.username),y.setToken(a)}}),[a]),r.a.createElement(l.a,null,r.a.createElement(m,{user:a}),r.a.createElement(f,null),r.a.createElement("div",{className:"container"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/quiz"},r.a.createElement(D,{user:a})),r.a.createElement(i.a,{exact:!0,path:"/login"},r.a.createElement(Q,{user:a})),r.a.createElement(i.a,{exact:!0,path:"/register"},r.a.createElement(F,{user:a})),r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(N,{user:a})))),r.a.createElement(U,null))},Y=a(23),H=Object(Y.b)(M);s.a.render(r.a.createElement(o.a,{store:H},r.a.createElement(V,null)),document.getElementById("root"))},58:function(e,t,a){e.exports=a(129)},67:function(e,t,a){}},[[58,1,2]]]);
//# sourceMappingURL=main.29d410b0.chunk.js.map