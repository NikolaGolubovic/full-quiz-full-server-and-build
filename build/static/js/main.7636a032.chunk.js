(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),o=n.n(c),u=n(9),s=(n(67),n(2)),i=n(16),l=n(12);function f(e){var t=e.user;return a.a.createElement("header",{className:"nav"},a.a.createElement("a",{href:"/quiz"},"Play Quiz"),t?a.a.createElement("div",{className:"user-control"},a.a.createElement("h4",null,t),a.a.createElement("div",{className:"log-out",onClick:function(){window.localStorage.clear(),window.location.reload()}},"Log Out")):a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{href:"/register"},"Sign Up"),a.a.createElement("a",{href:"/login"},"Sign In")))}var m=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e}));return console.log(t),a.a.createElement("div",null,t.info&&t.info.map((function(t){return setTimeout((function(){return e({type:"REMOVE_NOTI",id:t.id})}),4e3),a.a.createElement("div",{className:"info-notification",key:t.id},a.a.createElement("p",null,t.content),a.a.createElement("button",{onClick:function(){return e({type:"REMOVE_NOTI",id:t.id})}},"Close"))})),t.errors&&t.errors.map((function(t){return setTimeout((function(){return e({type:"REMOVE_ERROR",id:t.id})}),4e3),a.a.createElement("div",{className:"error-notification",key:t.id},a.a.createElement("p",null,t.content),a.a.createElement("button",{onClick:function(){return e({type:"REMOVE_ERROR",id:t.id})}},"Close"))})))},p=n(11),b={info:[],errors:[]},h=function(e){return{type:"ADD_INFO",info:e}},d=function(e){return{type:"ADD_ERROR",error:e}},E=function(){return Math.floor(1e5*Math.random())},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INFO":return Object(p.a)(Object(p.a)({},e),{},{info:e.info.concat({content:t.info,id:"info-".concat(E())})});case"ADD_ERROR":return console.log(t),Object(p.a)(Object(p.a)({},e),{},{errors:e.errors.concat({content:t.error,id:"error-".concat(E())})});case"REMOVE_NOTI":return Object(p.a)(Object(p.a)({},e),{},{info:e.info.filter((function(e){return e.id!==t.id}))});case"REMOVE_ERROR":return Object(p.a)(Object(p.a)({},e),{},{errors:e.errors.filter((function(e){return e.id!==t.id}))});case"RESET_NOTIFICATIONS":return b;default:return e}};var O=function(){var e=Object(u.b)();return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){e(h("This is your info "))}},"Test Redux"),a.a.createElement("a",{href:"/quiz"},"Play Quiz"))},g=n(25),j=n(3),y=n.n(j),w=n(6),k=n(30),x=n.n(k),S=function(){return a.a.createElement("div",{class:"loader-container"},a.a.createElement("div",{className:"loader"}))},N=n(24),C=n.n(N),R=null,T={setToken:function(e){R="bearer ".concat(e)},register:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendScore:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={score:t},r={headers:{Authorization:R}},e.next=4,C.a.put("/users/score",n,r);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var z=function(e){var t=e.score,n=e.user,r=function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.sendScore(t);case 2:e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"You made: ",t," "),n&&a.a.createElement("button",{onClick:r},"Confirm Your result"))};var _=function(e){var t,n=e.nums,c=e.quizCreated,o=e.user,u=Object(r.useState)([]),i=Object(s.a)(u,2),l=i[0],f=i[1],m=Object(r.useState)(!0),p=Object(s.a)(m,2),b=p[0],h=p[1],d=Object(r.useState)(0),E=Object(s.a)(d,2),v=E[0],O=E[1],j=Object(r.useState)(0),k=Object(s.a)(j,2),N=k[0],C=k[1],R=Object(r.useState)(12),T=Object(s.a)(R,2),_=T[0],q=T[1],I=Object(r.useState)(!1),M=Object(s.a)(I,2),A=M[0],D=M[1],F=Object(r.useState)(!1),Q=Object(s.a)(F,2),V=Q[0],J=Q[1],P=Object(r.useState)(0),U=Object(s.a)(P,2),Y=U[0],G=U[1];Object(r.useEffect)((function(){var e=[],t=[];function r(e){return a.apply(this,arguments)}function a(){return(a=Object(w.a)(y.a.mark((function e(r){var a,c,o,u,s,i,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length<1)){e.next=10;break}return e.next=3,fetch("https://opentdb.com/api.php?amount=10&type=multiple");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,t.push(c.results),e.next=33;break;case 10:if(1!==r.length){e.next=20;break}return e.next=13,fetch("https://opentdb.com/api.php?amount=10&category=".concat(n[0],"&type=multiple"));case 13:return o=e.sent,e.next=16,o.json();case 16:u=e.sent,t.push(u.results),e.next=33;break;case 20:if(!(r.length>1)){e.next=33;break}s=0;case 22:if(!(s<r.length)){e.next=33;break}return e.next=25,fetch(r[s]);case 25:return i=e.sent,e.next=28,i.json();case 28:l=e.sent,t.push(l.results);case 30:s++,e.next=22;break;case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e=n.map((function(e){return"https://opentdb.com/api.php?amount=10&category=".concat(e,"&type=multiple")}));var o=[];function u(){return(u=Object(w.a)(y.a.mark((function n(){var a,c,u,s,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(e){for(var t=[],n=0;n<e.length;n++){for(var r=[];r.length<4;)r.push(Math.floor(4*Math.random())),r=Object(g.a)(new Set(r));t[n]=[];for(var a=0;a<4;a++)t[n][r[a]]=e[n][a]}return t},c=function(e){for(;a.length<10;)a.push(Math.floor(Math.random()*e)),a=Object(g.a)(new Set(a))},n.next=4,r(e);case 4:if(10!==t.length){n.next=7;break}return f(t),n.abrupt("return");case 7:for(a=[],t=t.reduce((function(e,t){return e.concat(t)})),c(t.length),u=0;u<a.length;u++)o.push(t[a[u]]);return s=[],o.forEach((function(e,t){s[t]=[],e.correct_answer&&(s[t].push({solution:e.correct_answer,answer:!0}),delete e.correct_answer),e.incorrect_answers&&(e.incorrect_answers.map((function(e,n){return s[t].push({solution:e,answer:!1})})),delete e.incorrect_answers)})),s=i(s),o.forEach((function(e,t){return o[t].solutions=s[t]})),n.next=17,f(o);case 17:h(!1);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}c&&function(){u.apply(this,arguments)}()}),[c,n]);var L=function(){if(0===_)return q(12),9===v?void D(!0):(O(v+1),void J(!1));t=setTimeout((function(){q(_-1)}),1e3)};function B(){v+1!==10?(clearTimeout(t),O(v+1),J(!1),q(12)):D(!0)}return b?a.a.createElement(S,null):a.a.createElement("div",{className:"quiz-main-container"},a.a.createElement("div",{className:A?"blank":""},l.map((function(e,n){if(v===n)return a.a.createElement("ul",{className:"quiz-container",key:e.question.slice(10)},a.a.createElement("li",{className:"score",key:n,onClick:L()},a.a.createElement("small",null,"Time:")," ",_," ",a.a.createElement("small",null,"Points:")," ",N," ",a.a.createElement("small",null,"Question Number:")," ",n+1),a.a.createElement("button",{className:V?"fifty-used":"fifty-fifty",onClick:function(){return function(e){for(var n=[],r=[],a=0;n.length<2;)n.push(Math.floor(3*Math.random())),n=Object(g.a)(new Set(n));e.forEach((function(e){e.answer||(e.half=!0,r.push(e))}));for(var c=0;c<=2;c++)if(c!==n[0]&&c!==n[1]){a=c;break}r[a].half=!1,clearTimeout(t),J(!0),G(Y+1)}(e.solutions)},disabled:V||Y>=3},"50:50"),a.a.createElement("li",{className:"question-title",key:e.category+n},x()(e.question)),e.solutions.map((function(n){return a.a.createElement("button",{className:"solution",key:n.solution,onClick:function(){return function(e,n){var r=1,a=1;e.answer?("hard"===n?r=5:"medium"===n&&(r=3),_>8?a=5:_>=4&&_<=8&&(a=3),C(N+r+a)):C(r=N+-3>=0?N-3:0),clearTimeout(t),v+1!==10?(O(v+1),J(!1),q(12)):D(!0)}(n,e.difficulty)},disabled:n.half},a.a.createElement("span",{className:n.half?"half":""},x()(n.solution)))})),a.a.createElement("button",{className:"next-q",onClick:B},"Next Question"))}))),a.a.createElement("div",{className:A?"score":"blank"},a.a.createElement(z,{score:N,user:o})))};var q=function(e){var t=e.user,n=Object(l.f)(),c={},o=[],u=[{"General Knowledge":9},{History:23},{Geography:22},{Film:11},{"Science & Nature":17}],i={};u.forEach((function(e){for(var t in e)i[t]=e[t]})),u.forEach((function(e,t){for(var n in e)c[n]=!1}));var f=Object(r.useState)([]),m=Object(s.a)(f,2),p=m[0],b=m[1],h=Object(r.useState)(c),d=Object(s.a)(h,2),E=d[0],v=d[1],O=Object(r.useState)(!1),g=Object(s.a)(O,2),j=g[0],y=g[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:j?"blank":"selection"},a.a.createElement("h3",null,"Choose your Categories"),a.a.createElement("ul",{className:"categories"},u.map((function(e){var t=function(t){return{v:a.a.createElement("li",{key:e[t],className:E&&E[t]?"category active":"category",onClick:function(){return function(e){(c=E)[e]?(c[e]=!1,v(c)):(c[e]=!0,v(c)),o=p;for(var t=0;t<o.length;t++)if(o[t]===i[e])return o.splice(t,1),b(o),void n.push("/quiz");o.push(i[e]),b(o),n.push("/quiz")}(t)}},t)}};for(var r in e){var u=t(r);if("object"===typeof u)return u.v}}))),a.a.createElement("button",{className:"btn-create-quiz",onClick:function(){y(!0)}},function(e){var t=0,n="";for(var r in e)e[r]&&(t+=1),1===t&&e[r]&&(n=r);return 1===t?"Create ".concat(n,"'s Quiz"):t>1?"Create Quiz with choosen areas":"Create highly random Quiz"}(E))),a.a.createElement("div",{className:j?"quiz":"blank"},a.a.createElement(_,{nums:p,quizCreated:j,user:t})))};var I=function(e){var t=e.user,n=Object(u.b)(),c=Object(l.f)();Object(r.useEffect)((function(){t&&c.push("/")}),[t,c]);var o=Object(r.useState)(""),i=Object(s.a)(o,2),f=i[0],m=i[1],p=Object(r.useState)(""),b=Object(s.a)(p,2),E=b[0],v=b[1],O=Object(r.useState)(!1),g=Object(s.a)(O,2),j=g[0],k=g[1];function x(){return(x=Object(w.a)(y.a.mark((function e(t){var r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=[],e.prev=2,f||r.push("Username is missing"),E||r.push("Password is missing"),0===r.length){e.next=7;break}throw r;case 7:return e.next=9,T.login({username:f,password:E});case 9:a=e.sent,c=JSON.stringify(a),window.localStorage.setItem("loggedUser",c),n(h("You are successfully Sign In")),setTimeout((function(){return window.location.reload()}),1500),k(!0),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Array.isArray(e.t0)?e.t0.forEach((function(e){n(d(e))})):e.t0.response&&e.t0.response.data?n(d(e.t0.response.data.error)):n(d(e.t0.message));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}return a.a.createElement("div",null,!j&&a.a.createElement("form",{onSubmit:function(e){return x.apply(this,arguments)}},a.a.createElement("input",{type:"text",value:f,onChange:function(e){return m(e.target.value)}})," ",a.a.createElement("br",null),a.a.createElement("input",{type:"password",value:E,onChange:function(e){return v(e.target.value)}})," ",a.a.createElement("br",null),a.a.createElement("button",null,"Login")))};var M=function(e){var t=e.user,n=Object(r.useState)(""),c=Object(s.a)(n,2),o=c[0],i=c[1],f=Object(r.useState)(""),m=Object(s.a)(f,2),p=m[0],b=m[1],h=Object(r.useState)(""),E=Object(s.a)(h,2),v=E[0],O=E[1],g=Object(r.useState)(""),j=Object(s.a)(g,2),k=j[0],x=j[1],S=Object(u.b)(),N=Object(l.f)();Object(r.useEffect)((function(){t&&N.push("/")}));var C=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,n=[],p!==v&&n.push("Password Confirmation does not match!"),0===n.length){e.next=6;break}throw n;case 6:return e.next=8,T.register({username:o,password:p});case 8:return e.next=10,T.login({username:o,password:p});case 10:r=e.sent,a=JSON.stringify(r),window.localStorage.setItem("loggedUser",a),window.location.reload(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),Array.isArray(e.t0)?e.t0.forEach((function(e){return S(d(e))})):e.t0&&e.t0.response&&S(d(e.t0.response.data.error)),setTimeout((function(){x("")}),2e3);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),R={display:k?"":"none",border:"solid",borderWidth:3,borderColor:k?"red":"black",padding:10,margin:10};return a.a.createElement("div",null,a.a.createElement("div",{style:R},k),a.a.createElement("form",{onSubmit:C},a.a.createElement("input",{type:"text",value:o,onChange:function(e){return i(e.target.value)}})," ",a.a.createElement("br",null),a.a.createElement("input",{type:"password",value:p,onChange:function(e){return b(e.target.value)}})," ",a.a.createElement("br",null),a.a.createElement("input",{type:"password",value:v,onChange:function(e){return O(e.target.value)}})," ",a.a.createElement("br",null),a.a.createElement("button",null,"Register")))};var A=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e),n=t.token;c(t.username),T.setToken(n)}}),[n]),a.a.createElement(i.a,null,a.a.createElement(f,{user:n}),a.a.createElement(m,null),a.a.createElement(l.c,null,a.a.createElement(l.a,{path:"/quiz"},a.a.createElement(q,{user:n})),a.a.createElement(l.a,{path:"/login"},a.a.createElement(I,{user:n})),a.a.createElement(l.a,{path:"/register"},a.a.createElement(M,{user:n})),a.a.createElement(l.a,{exact:!0,path:"/",component:O})))},D=n(22),F=Object(D.b)(v);o.a.render(a.a.createElement(u.a,{store:F},a.a.createElement(A,null)),document.getElementById("root"))},58:function(e,t,n){e.exports=n(129)},67:function(e,t,n){},93:function(e,t){}},[[58,1,2]]]);
//# sourceMappingURL=main.7636a032.chunk.js.map